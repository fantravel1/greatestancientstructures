---
interface BreadcrumbItem {
  label: string;
  href?: string;
}

interface Props {
  items: BreadcrumbItem[];
  class?: string;
}

const { items, class: className = '' } = Astro.props;

// Schema.org BreadcrumbList
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": items.map((item, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "name": item.label,
    ...(item.href && { "item": `https://greatestancientstructures.com${item.href}` })
  }))
};
---

<nav aria-label="Breadcrumb" class={`flex items-center gap-2 text-sm ${className}`}>
  <script type="application/ld+json" set:html={JSON.stringify(breadcrumbSchema)} />

  {items.map((item, index) => (
    <>
      {index > 0 && (
        <svg class="w-4 h-4 text-stone-600 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      )}
      {item.href ? (
        <a
          href={item.href}
          class="text-stone-400 hover:text-gold-400 transition-colors truncate"
        >
          {item.label}
        </a>
      ) : (
        <span class="text-stone-300 truncate">{item.label}</span>
      )}
    </>
  ))}
</nav>
